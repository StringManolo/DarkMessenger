
# $1 is your user alias
# $2 is remote user .onion address
# $3 is remote port number

# TODO: Check the args contain valid format, for example they can't contain spaces
ACK_ME() {
  local MY_ALIAS="$1"
  local REMOTE_ADDRESS="$2"
  local REMOTE_PORT="$3"
  if [ ! -v MY_ALIAS ]; then
    MY_ALIAS="UNKNOWN"
  fi

  if [ ! -v REMOTE_ADDRESS  ]; then
    echo 'Unable to send ACK_ME message. No .onion destination provided'
    exit
  fi

  if [ ! -v REMOTE_PORT ]; then
    REMOTE_PORT=9443 # default hidden_service port
  fi

  echo -e "ACK_ME $MY_ALIAS" | torsocks nc "$REMOTE_ADDRESS" "$REMOTE_PORT" 
}

